"""
Plantilla base para prácticas de automatización en ciberseguridad.

Pensada para apoyar el aprendizaje y la preparación para OSCP.
La lógica principal está en la función `accion()`, que se modifica
según el objetivo del ejercicio.
"""

import json
import time


def cargar_entradas(archivo):
    with open(archivo) as f:
        return f.read().splitlines()


def accion(valor):
    """
    MODIFICAR ESTA FUNCIÓN SEGÚN EL OBJETIVO

    Ejemplos de uso:
    - procesar texto
    - enumerar servicios
    - recolectar información
    """
    return {
        "entrada": valor,
        "longitud": len(valor)
    }


def ejecutar(entradas):
    resultados = []

    for e in entradas:
        resultado = accion(e)
        resultados.append(resultado)
        time.sleep(0.3)

    return resultados


def guardar_resultados(data, nombre="resultados.json"):
    with open(nombre, "w") as f:
        json.dump(data, f, indent=4)


if __name__ == "__main__":
    entradas = cargar_entradas("scripts/examples/paths.txt")
    resultados = ejecutar(entradas)
    guardar_resultados(resultados)
